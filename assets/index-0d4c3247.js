(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const C=[[[0,0],[0,1],[0,2]],[[1,0],[1,1],[1,2]],[[2,0],[2,1],[2,2]],[[0,0],[1,0],[2,0]],[[0,1],[1,1],[2,1]],[[0,2],[1,2],[2,2]],[[0,0],[1,1],[2,2]],[[0,2],[1,1],[2,0]]],f="extreme-tictactoe-model";let s;function I(l,e,o,t){if(s.nextPlayerConstraints!==null&&(l!==s.nextPlayerConstraints.x1||e!==s.nextPlayerConstraints.y1))return;const n=s.subgrids[l][e];if(n.cells[o][t]!==null)return;n.cells[o][t]=s.currentPlayer,s.currentPlayer=s.currentPlayer==="x"?"o":"x";const r=N(l,e);n.winner=r,s.nextPlayerConstraints=m(o,t).winner===null?{x1:o,y1:t}:null,b()}function E(l,e,o,t){return s.subgrids[l][e].cells[o][t]}function m(l,e){return{...s.subgrids[l][e],cells:void 0}}function y(){return s.nextPlayerConstraints}function O(){return s.currentPlayer}function N(l,e){const t=s.subgrids[l][e].cells,n=C.find(u=>t[u[0][0]][u[0][1]]!==null&&t[u[0][0]][u[0][1]]===t[u[1][0]][u[1][1]]&&t[u[0][0]][u[0][1]]===t[u[2][0]][u[2][1]]);return n==null?null:t[n[0][0]][n[0][1]]}function p(){s={nextPlayerConstraints:null,winner:null,currentPlayer:"x",subgrids:[[{winner:null,cells:[[null,null,null],[null,null,null],[null,null,null]]},{winner:null,cells:[[null,null,null],[null,null,null],[null,null,null]]},{winner:null,cells:[[null,null,null],[null,null,null],[null,null,null]]}],[{winner:null,cells:[[null,null,null],[null,null,null],[null,null,null]]},{winner:null,cells:[[null,null,null],[null,null,null],[null,null,null]]},{winner:null,cells:[[null,null,null],[null,null,null],[null,null,null]]}],[{winner:null,cells:[[null,null,null],[null,null,null],[null,null,null]]},{winner:null,cells:[[null,null,null],[null,null,null],[null,null,null]]},{winner:null,cells:[[null,null,null],[null,null,null],[null,null,null]]}]]},b()}function $(){const l=localStorage.getItem(f);return l==null?!1:(s=JSON.parse(l),!0)}function b(){localStorage.setItem(f,JSON.stringify(s))}const w="/extreme-tictactoe/assets/cross-5898bcdf.svg",L="/extreme-tictactoe/assets/circle-cafc1173.svg",i=document.querySelector(".main-grid"),M=document.getElementById("next-player-image"),_=document.getElementById("new-game-btn"),P={x:w,o:L};i.addEventListener("click",l=>{if(!(l.target instanceof HTMLButtonElement))return;const e=l.target,{coordX1:o,coordY1:t,coordX2:n,coordY2:r}=e.dataset,u=parseInt(o),c=parseInt(t),a=parseInt(n),d=parseInt(r);I(u,c,a,d),S(u,c,a,d),g(u,c),g(a,d),h(),v()});_.addEventListener("click",()=>{p(),x()});function x(){for(let l=0;l<=2;l++)for(let e=0;e<=2;e++){for(let o=0;o<=2;o++)for(let t=0;t<=2;t++)S(e,l,t,o);g(e,l)}h(),v()}function S(l,e,o,t){const n=E(l,e,o,t),r=i.querySelector(`button[data-coord-x1='${l}'][data-coord-y1='${e}'][data-coord-x2='${o}'][data-coord-y2='${t}']`);if(!r||(r.innerHTML="",n===null))return;const u=document.createElement("img");u.src=P[n],u.classList.add(n),r.appendChild(u)}function g(l,e){const o=i.querySelector(`.sub-grid[data-coord-x1='${l}'][data-coord-y1='${e}']`);if(!o)return;const{winner:t}=m(l,e),n=o.querySelector(".sub-grid__winner");l:if(t!==null){if(console.log("update subgrid adding winner"),n!=null)break l;console.log("update subgrid not added yet");const u=document.createElement("div");u.classList.add("sub-grid__winner");const c=document.createElement("img");c.src=t==="x"?w:L,u.appendChild(c),o.appendChild(u)}else n==null||n.remove();const r=y();console.log(r),l==(r==null?void 0:r.x1)&&e==(r==null?void 0:r.y1)?(console.log(`adding constraints indication in subgrid (${l}, ${e})`),o.classList.add("sub-grid--playable")):o.classList.remove("sub-grid--playable")}function v(){const l=O();M.src=P[l]}function h(){const l=y();console.log(l),l==null?i.classList.remove("no-hover"):i.classList.add("no-hover")}const q=$();q||p();x();
